title: Trigger GitLab Pipeline
summary: Trigger a pipeline in a GitLab project via the API.
description: |-
  This step triggers a pipeline in a GitLab project using the provided API token, project ID, branch, and optional environment variables.

  ### Usage Instructions

  - Provide a **GitLab API base URL**, typically `https://gitlab.com/api/v4` for cloud-hosted GitLab instances.
  - Supply a **private token** with sufficient permissions to trigger pipelines.
  - Use the **GitLab project ID** of the repository where the pipeline will be triggered.
  - Specify the branch or tag to trigger the pipeline on with the **git_ref** input.

toolkit:
  go:
    package_name: github.com/markst/steps-gitlab-pipeline
inputs:
  - api_base_url: "https://gitlab.com/api/v4"
    opts:
      title: "GitLab API Base URL"
      summary: "The base URL for GitLab's API."
      description: |-
        The API URL for GitLab or GitLab Enterprise.
        Example: `https://gitlab.com/api/v4`.
      is_required: true

  - private_token: ""
    opts:
      title: "GitLab Private Token"
      summary: "The token used to authenticate API requests."
      description: |-
        A GitLab API token with sufficient permissions to trigger pipelines.
        Example steps to generate a token:
        1. Log in to your GitLab instance.
        2. Navigate to User Settings > Access Tokens.
        3. Provide a name, set an appropriate scope, and generate the token.
      is_required: true
      is_sensitive: true

  - project_id: ""
    opts:
      title: "GitLab Project ID"
      summary: "The ID of the GitLab project where the pipeline will be triggered."
      description: |-
        Provide the numerical project ID from GitLab. You can find this in your project's settings or its URL.
        Example: `123456`.
      is_required: true

  - git_ref: "$BITRISE_GIT_BRANCH"
    opts:
      title: "Branch or Tag"
      summary: "The branch or tag to trigger the pipeline on."
      description: |-
        Specify the branch or tag name where the pipeline will be triggered.
        Example: `main`, `release/v1.0.0`.
      is_required: true

outputs: []
